document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector("form");e&&e.addEventListener("submit",async function(e){e.preventDefault();const t=new FormData(this),n=Object.fromEntries(t.entries());if(!(n.name&&n.email&&n.phone&&n.zipcode&&n.address&&n.house_type))return void alert("Venligst udfyld alle påkrævede felter");if(!n.consent)return void alert("Du skal acceptere, at vi må kontakte dig");const r=this.querySelector('button[type="submit"]'),i=r.innerHTML;r.disabled=!0,r.innerHTML='<span class="inline-block animate-spin mr-2">⌛</span>Sender...';try{const e=await fetch("/contact.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),t=await e.json();if(!e.ok)throw new Error(t.error||"Der opstod en fejl ved afsendelse af din forespørgsel");alert("Tak for din forespørgsel! Vi vender tilbage hurtigst muligt."),this.reset()}catch(e){alert(e.message)}finally{r.disabled=!1,r.innerHTML=i}})});